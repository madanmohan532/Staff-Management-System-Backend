package training.iqgateway.util;

import training.iqgateway.dto.HospitalRegistrationRequestDTO;
import training.iqgateway.dto.HospitalRegistrationResponseDTO;
import training.iqgateway.entity.HospitalRegistrationEntity;

public class HospitalUtils {
	
	public static HospitalRegistrationResponseDTO convertToResponseDTO(HospitalRegistrationEntity hospital) {
		
		HospitalRegistrationResponseDTO hospitalResponseDTO = new HospitalRegistrationResponseDTO();

        HospitalRegistrationResponseDTO.Address address = new HospitalRegistrationResponseDTO.Address();
        HospitalRegistrationResponseDTO.ContactDetails contactDetails = new HospitalRegistrationResponseDTO.ContactDetails();
		
		hospitalResponseDTO.set_id(hospital.get_id());
        hospitalResponseDTO.setName(hospital.getName());
        hospitalResponseDTO.setCeoName(hospital.getCeoName());
        hospitalResponseDTO.setCertificate(hospital.getCertificate());
        hospitalResponseDTO.setKmcNumber(hospital.getKmcNumber());
        address.setCity(hospital.getAddress().getCity());
        address.setPincode(hospital.getAddress().getPincode());
        address.setState(hospital.getAddress().getState());
        address.setStreet(hospital.getAddress().getStreet());

        hospitalResponseDTO.setAddress(address);

        contactDetails.setEmail(hospital.getContactDetails().getEmail());
        contactDetails.setPhone(hospital.getContactDetails().getPhone());

        hospitalResponseDTO.setContactDetails(contactDetails);
        hospitalResponseDTO.setStaffDetails(hospital.getStaffDetails());
        hospitalResponseDTO.setRegistrationStatus(hospital.getRegistrationStatus());
        return hospitalResponseDTO;
	}
	
	public static HospitalRegistrationEntity convertToRegistrationEntity(HospitalRegistrationRequestDTO hospitalRequestDTO) {
HospitalRegistrationEntity hospitalEntity = new HospitalRegistrationEntity();
		
		
		hospitalEntity.setName(hospitalRequestDTO.getName());
		hospitalEntity.setCeoName(hospitalRequestDTO.getCeoName());
		hospitalEntity.setCertificate(hospitalRequestDTO.getCertificate());
		
		String city = hospitalRequestDTO.getAddress().getCity();
		String street = hospitalRequestDTO.getAddress().getPincode();
		String state = hospitalRequestDTO.getAddress().getState();
		String pincode = hospitalRequestDTO.getAddress().getPincode();
		
		hospitalEntity.setAddress(new HospitalRegistrationEntity.Address(street,city,state,pincode));
		
		hospitalEntity.setContactDetails(new HospitalRegistrationEntity.ContactDetails(
			 hospitalRequestDTO.getContactDetails().getPhone(),hospitalRequestDTO.getContactDetails().getEmail()));
		hospitalEntity.set_id(HospitalUtils.HospitalIdGenerator(hospitalRequestDTO.getContactDetails().getPhone(), pincode));
		hospitalEntity.setStaffDetails(hospitalRequestDTO.getStaffDetails());
		hospitalEntity.setRegistrationStatus(hospitalRequestDTO.getRegistrationStatus());
		return hospitalEntity;
	}
	
	
	public static String HospitalIdGenerator(String phone,String pincode) {
		return "HOS"+phone.substring(3, 7) + pincode.substring(3);
	}

}
